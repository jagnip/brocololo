generator client {
  provider = "prisma-client"
  output   = "../src/generated"
}

datasource db {
  provider = "postgresql"
}

model Category {
  id      String   @id @default(cuid())
  name    String   @unique
  slug    String   @unique
  recipes Recipe[] @relation("category_recipes")

  @@map("categories")
}

model Recipe {
  id           String     @id @default(cuid())
  name         String     @unique
  slug         String     @unique
  imageUrl     String     @map("image_url")
  instructions String[]
  handsOnTime  Int        @map("hands_on_time")
  notes        String[]
  servings     Int
  categories   Category[] @relation("category_recipes")
  ingredients RecipeIngredient[]

  @@map("recipes")
}

model Ingredient {
  id            String   @id @default(cuid())
  name          String   @unique
  slug          String   @unique
  supermarketUrl String? @map("supermarket_url")
  calories       Float
  proteins       Float
  fats           Float
  carbs          Float
  recipes RecipeIngredient[]
  
  @@map("ingredients")
}

model RecipeIngredient {
  id          String   @id @default(cuid())
  recipeId    String
  ingredientId String
  amount      Int  
  recipe      Recipe   @relation(fields: [recipeId], references: [id], onDelete: Cascade)
  ingredient  Ingredient @relation(fields: [ingredientId], references: [id])

  @@map("recipe_ingredients")
}

